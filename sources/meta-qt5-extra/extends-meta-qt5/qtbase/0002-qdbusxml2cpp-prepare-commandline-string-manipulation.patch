From cf88c25f97e7d6a39ca8090369f1654902229399 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andreas=20M=C3=BCller?= <schnitzeltony@googlemail.com>
Date: Sat, 5 Sep 2015 17:53:22 +0200
Subject: [PATCH] qdbusxml2cpp: prepare commandline string manipulation
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Upstream-Status: Inappropriate [embedded specific]

Signed-off-by: Andreas MÃ¼ller <schnitzeltony@googlemail.com>
---
 src/tools/qdbusxml2cpp/qdbusxml2cpp.cpp | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/tools/qdbusxml2cpp/qdbusxml2cpp.cpp b/src/tools/qdbusxml2cpp/qdbusxml2cpp.cpp
index 76401da..3a712d2 100644
--- a/src/tools/qdbusxml2cpp/qdbusxml2cpp.cpp
+++ b/src/tools/qdbusxml2cpp/qdbusxml2cpp.cpp
@@ -289,9 +289,12 @@ static QString moc(const QString &name)
 
 static QTextStream &writeHeader(QTextStream &ts, bool changesWillBeLost)
 {
+	QString strCmdLine = commandLine;
+	strCmdLine.replace(QStringLiteral("STRING_FULL_PATH"), QStringLiteral("STRING_PATH"));
+	strCmdLine.replace(QStringLiteral("recipe-sysroot"), QStringLiteral("recipe--sysroot"));
     ts << "/*" << endl
        << " * This file was generated by " PROGRAMNAME " version " PROGRAMVERSION << endl
-       << " * Command line was: " << commandLine << endl
+       << " * Command line was: " << strCmdLine << endl
        << " *" << endl
        << " * " PROGRAMNAME " is " PROGRAMCOPYRIGHT << endl
        << " *" << endl
-- 
2.1.0

